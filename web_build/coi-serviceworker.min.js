/*! coi-serviceworker v0.1.7 - Guido Zuidhof and contributors, licensed under MIT */
let e;function n(e){let n=new URL(e.request.url);if(n.origin===location.origin&&n.pathname.endsWith(".html"))return new Promise(e=>{let t=caches.open("html-cache");t.then(t=>{t.match(n).then(r=>{r?e(r):fetch(n).then(r=>{t.put(n,r.clone()),e(r)})})})});return fetch(e.request)}self.addEventListener("install",()=>{self.skipWaiting()}),self.addEventListener("activate",e=>{e.waitUntil(self.clients.claim())}),self.addEventListener("message",n=>{n.data&&"deregister"===n.data.type&&self.registration.unregister().then(()=>{self.clients.matchAll().then(e=>{e.forEach(e=>e.navigate(e.url))})})}),self.addEventListener("fetch",function(t){if("only-if-cached"===t.request.cache&&"same-origin"!==t.request.mode)return;const r="https://"+location.host+location.pathname.replace(/\/$/,"");if(!t.request.url.startsWith(r))return;t.respondWith(new Promise(async r=>{const a={"Cross-Origin-Embedder-Policy":"require-corp","Cross-Origin-Opener-Policy":"same-origin"};if(t.request.cache&&"only-if-cached"===t.request.cache&&"same-origin"!==t.request.mode)return;if("navigate"===t.request.mode)try{const n=await fetch(t.request);if(!n.ok)return void r(n);const s=new Headers(n.headers);return s.set("Cross-Origin-Embedder-Policy","require-corp"),s.set("Cross-Origin-Opener-Policy","same-origin"),s.delete("X-Frame-Options"),s.delete("Content-Security-Policy"),void r(new Response(n.body,{status:n.status,statusText:n.statusText,headers:s}))}catch(e){return void r(n(t))}r(n(t))}))});
